{% load static %}
{% url 'logout' as logout %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="refresh" content="60" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="Dashboard">
  <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
  <title>LumTool</title>

  <!-- icon -->
  <link rel="shortcut icon" href="{% static 'images/lumtool.png' %}"> 
  <!-- Bootstrap core CSS -->
  <link href="{% static 'lib/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <!--external css-->
  <link href="{% static 'lib/font-awesome/css/font-awesome.css' %}" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="{% static 'css/zabuto_calendar.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'lib/gritter/css/jquery.gritter.css' %}" />
  <!-- Custom styles for this template -->
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
  <link href="{% static 'css/style-responsive.css' %}" rel="stylesheet">
  <script src="{% static 'lib/chart-master/Chart.js' %}"></script>
</head>

<body>
  <section id="container">
    <!-- **********************************************************************************************************************************************************
        TOP BAR CONTENT & NOTIFICATIONS
        *********************************************************************************************************************************************************** -->
    <!--header start-->
    <header class="header black-bg">
      <div class="sidebar-toggle-box">
        <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
      </div>
	  <!--logo start-->
    <div class="col-md-1">
      <a href="{% url 'index' %}" class=""><img src="{% static 'images/logo.png' %}" height="40" alt="Logo" style="margin: 10px;"></a>
    </div>
      <!--logo end-->
      <div class="nav notify-row" id="top_menu">
        <!--  notification start -->
        <ul class="nav top-menu">
          <!-- settings start -->
          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="index#">
              <i class="fa fa-tasks"></i>
              <!--span class="badge bg-theme">4</span-->
              </a>
            <!--ul class="dropdown-menu extended tasks-bar">
              <div class="notify-arrow notify-arrow-green"></div>
              <li>
                <p class="green">You have 4 pending tasks</p>
              </li>
              <li>
                <a href="index.html#">
                  <div class="task-info">
                    <div class="desc">Dashio Admin Panel</div>
                    <div class="percent">40%</div>
                  </div>
                  <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                      <span class="sr-only">40% Complete (success)</span>
                    </div>
                  </div>
                </a>
              </li>
              <li>
                <a href="index.html#">
                  <div class="task-info">
                    <div class="desc">Database Update</div>
                    <div class="percent">60%</div>
                  </div>
                  <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                      <span class="sr-only">60% Complete (warning)</span>
                    </div>
                  </div>
                </a>
              </li>
              <li>
                <a href="index.html#">
                  <div class="task-info">
                    <div class="desc">Product Development</div>
                    <div class="percent">80%</div>
                  </div>
                  <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                      <span class="sr-only">80% Complete</span>
                    </div>
                  </div>
                </a>
              </li>
              <li>
                <a href="index.html#">
                  <div class="task-info">
                    <div class="desc">Payments Sent</div>
                    <div class="percent">70%</div>
                  </div>
                  <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%">
                      <span class="sr-only">70% Complete (Important)</span>
                    </div>
                  </div>
                </a>
              </li>
              <li class="external">
                <a href="#">See All Tasks</a>
              </li>
            </ul-->
          </li>
          <!-- settings end -->
          <!-- inbox dropdown start-->
          <li id="header_inbox_bar" class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
              <i class="fa fa-envelope-o"></i>
              <!--span class="badge bg-theme">5</span-->
              </a>
            <!--ul class="dropdown-menu extended inbox">
              <div class="notify-arrow notify-arrow-green"></div>
              <li>
                <p class="green">You have 5 new messages</p>
              </li>
              <li>
                <a href="index.html#">
                  <span class="photo"><img alt="avatar" src="img/ui-zac.jpg"></span>
                  <span class="subject">
                  <span class="from">Zac Snider</span>
                  <span class="time">Just now</span>
                  </span>
                  <span class="message">
                  Hi mate, how is everything?
                  </span>
                  </a>
              </li>
              <li>
                <a href="index.html#">
                  <span class="photo"><img alt="avatar" src="img/ui-divya.jpg"></span>
                  <span class="subject">
                  <span class="from">Divya Manian</span>
                  <span class="time">40 mins.</span>
                  </span>
                  <span class="message">
                  Hi, I need your help with this.
                  </span>
                  </a>
              </li>
              <li>
                <a href="index.html#">
                  <span class="photo"><img alt="avatar" src="img/ui-danro.jpg"></span>
                  <span class="subject">
                  <span class="from">Dan Rogers</span>
                  <span class="time">2 hrs.</span>
                  </span>
                  <span class="message">
                  Love your new Dashboard.
                  </span>
                  </a>
              </li>
              <li>
                <a href="index.html#">
                  <span class="photo"><img alt="avatar" src="img/ui-sherman.jpg"></span>
                  <span class="subject">
                  <span class="from">Dj Sherman</span>
                  <span class="time">4 hrs.</span>
                  </span>
                  <span class="message">
                  Please, answer asap.
                  </span>
                  </a>
              </li>
              <li>
                <a href="index.html#">See all messages</a>
              </li>
            </ul-->
          </li>
          <!-- inbox dropdown end -->
          <!-- notification dropdown start-->
          <li id="header_notification_bar" class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
              <i class="fa fa-bell-o"></i>
              <!--span class="badge bg-warning">7</span-->
              </a>
            <!--ul class="dropdown-menu extended notification">
              <div class="notify-arrow notify-arrow-yellow"></div>
              <li>
                <p class="yellow">You have 7 new notifications</p>
              </li>
              <li>
                <a href="index.html#">
                  <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                  Server Overloaded.
                  <span class="small italic">4 mins.</span>
                  </a>
              </li>
              <li>
                <a href="index.html#">
                  <span class="label label-warning"><i class="fa fa-bell"></i></span>
                  Memory #2 Not Responding.
                  <span class="small italic">30 mins.</span>
                  </a>
              </li>
              <li>
                <a href="index.html#">
                  <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                  Disk Space Reached 85%.
                  <span class="small italic">2 hrs.</span>
                  </a>
              </li>
              <li>
                <a href="index.html#">
                  <span class="label label-success"><i class="fa fa-plus"></i></span>
                  New User Registered.
                  <span class="small italic">3 hrs.</span>
                  </a>
              </li>
              <li>
                <a href="index.html#">See all notifications</a>
              </li>
            </ul-->
          </li>
          <!-- notification dropdown end -->
        </ul>
        <!--  notification end -->
      </div>
      <div class="top-menu">
        <ul class="nav pull-right top-menu">
          <li><a class="logout" href="{{ logout }}">Logout</a></li>
        </ul>
      </div>
    </header>
    <!--header end-->
    <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
    <!--sidebar start-->
    <aside>
      <div id="sidebar" class="nav-collapse ">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu" id="nav-accordion">
          <li class="mt">
            <a  href="{% url 'index' %}">
              <i class="fa fa-dashboard"></i>
              <span>Dashboard</span>
              </a>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fas fa-project-diagram"></i>
              <span>Nodes</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'nodeList' %}">List</a></li>
              <li><a href="{% url 'nodecreate' %}">Create</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fas fa-server"></i>
              <span>Distris</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'dnodeList' %}">List</a></li>
              <li><a href="{% url 'dnodeCreate' %}">Create</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fas fa-user-friends"></i>
              <span>Customers</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'customerList' %}">List</a></li>
              <li><a href="{% url 'customercreate' %}">Create</a></li>
              <li><a href="{% url 'dcustomerList' %}">CPEs List</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fa fa-house-user"></i>
              <span>PON</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'oltList' %}">OLT List</a></li>
              <li><a href="{% url 'condoList' %}">Residencial List</a></li>
              <li><a href="{% url 'onuList' %}">Customers List</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fa fa-tools"></i>
              <span>More Tools</span>
              </a>
            <ul class="sub">
              <li><a href="https://nairobi.crisp.cr/nagios" target="_new">Nagios</a></li>
              <li><a href="http://singapore.crisp.cr/cacti" target="_new">Cacti</a></li>
              <li><a href="https://copenhagen.crisp.cr/" target="_new">Zabbix</a></li>
              <li><a href="https://speed-test.luminet.cr/" target="_new">speedTest</a></li>
            </ul>
          </li>
          <li>
            <a href="{% url 'international' %}">
              <i class="fas fa-traffic-light"></i>
              <span>International Links</span>
              </a>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fa fa-chart-area"></i>
              <span>OTDR</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'otdrList' %}">OTDR List</a></li>
              <li><a href="{% url 'otdrCreate' %}">Upload Archive</a></li>
            </ul>
          </li>
          <li>
            <a href="{% url 'nodeMap' %}">
              <i class="fa fa-map-marker"></i>
              <span>Nodes Maps </span>
              </a>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
    <!--sidebar end-->
    <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
        <br>
        <div class="row">
          <!-- WEATHER PANEL -->
          <div class="col-md-4 mb">
            <div class="grey-panel pn donut-chart">
              <div class="grey-header">
                <h5><a href="https://190.106.76.238/nagios/cgi-bin/status.cgi?hostgroup=all&style=hostdetail&hoststatustypes=4" style="color: brown;"><i class="fa fa-angle-right"></i> Nagios Alarms</a></h5>
              </div>
              <canvas id="serverstatus01" height="120" width="120"></canvas>
              <script>
                var doughnutData = [{
                    value: {{s}},
                    color: "#FF6B6B"
                  },
                  {
                    value: {{100-s}},
                    color: "#fdfdfd"
                  }
                ];
                var myDoughnut = new Chart(document.getElementById("serverstatus01").getContext("2d")).Doughnut(doughnutData);
              </script>
              <div class="row">
                <div class="col-sm-2 col-xs-3 goleft">
                  <p>Current<br/>Alerts:</p>
                </div>
                <div class="col-sm-4 col-xs-3 goleft">
                  <h2>{{s}}</h2>
                </div>
                <div class="col-sm-6 col-xs-6">
                  <h2>{{s}}% </h2>
                </div>
              </div>
            </div>
          </div>
          <!-- /col-md-4-->
          <!-- DIRECT MESSAGE PANEL -->
          <div class="col-md-8 mb">
            <div class="message-p pn">
              <div class="message-header">
                <h5><a href="https://190.106.76.238/nagios/cgi-bin/status.cgi?hostgroup=all&style=hostdetail&hoststatustypes=4" style="color: brown;"><i class="fa fa-angle-right"></i> Nagios Alarms</a></h5>
              </div>
              <div class="row">
                <div class="col-md-12"  style="max-height: 180px; overflow-y: auto;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Host</th>
                        <th>Alarm</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for x,y,z in status %}
                      <tr>
                        <td>{{z}}</td>
                        <td><a href="https://190.106.76.238/nagios/cgi-bin/extinfo.cgi?type=1&host={{x}}" target="_new">{{x}}</a></td>
                        <td>{{y}}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /Message Panel-->
          </div>
          <!-- /col-md-8  -->
        </div>


        <br>
        <div class="row">
          <div class="col-md-8 mb">
            <div class="message-p pn">
              <div class="message-header">
                <h5><a href="https://190.106.76.238/nagios/cgi-bin/status.cgi?hostgroup=all&style=hostdetail&hoststatustypes=4" style="color: brown;"><i class="fa fa-angle-right"></i> Nodes Ports Alarms</a></h5>
              </div>
              <div class="row">
                <div class="col-md-12"  style="max-height: 180px; overflow-y: auto;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th >Circuit ID</th>
                        <th >Area</th>
                        <th >Int 1G</th>
                        <th >Int 10G</th>
                        <th >Total Int</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for x,y,z,w,b,ug,dg,ut,dt,t in node  %}
                        <tr class="table-danger"> 
                          <td><a href="{% url 'nodeview' x %}" style="color:rgb(80, 80, 80)"> {{b}}_{{ y }}</a></td>
                          <td style="background-color: #f1f1f1;">{{ z }}</td>
                          <td>
                              <i class="fas fa-ethernet" style="color:green" alt="up"></i> {{ ug }} <i class="fas fa-ethernet" style="color:red"></i> {{ dg }} </h5>
                          </td>
                          <td>
                              <i class="fas fa-ethernet" style="color:green" alt="up"></i> {{ ut }} <i class="fas fa-ethernet" style="color:red"></i> {{ dt }} </h5>
                          </td>
                          <td>
                              <i class="fas fa-ethernet" alt="up"></i> {{ t }}
                          </td>
                        </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /Message Panel-->
          </div>
          <div class="col-md-4 mb">
            <div class="grey-panel pn donut-chart">
              <div class="grey-header">
                <h5><a href="https://190.106.76.238/nagios/cgi-bin/status.cgi?hostgroup=all&style=hostdetail&hoststatustypes=4" style="color: brown;"><i class="fa fa-angle-right"></i> Nodes Ports Alarms</a></h5>
              </div>
              <canvas id="serverstatus02" height="120" width="120"></canvas>
              <script>
                var doughnutData2 = [{
                    value: {{porc}},
                    color: "#FF6B6B"
                  },
                  {
                    value: {{porcd}},
                    color: "#fdfdfd"
                  }
                ];
                var myDoughnut = new Chart(document.getElementById("serverstatus02").getContext("2d")).Doughnut(doughnutData);
              </script>
              <div class="row">
                <div class="col-sm-6 col-xs-6 goleft">
                  <p>Current<br/>Alerts:</p>
                </div>
                <div class="col-sm-6 col-xs-6">
                  <h2>{{porcd}}%</h2>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-8 mb">
            <div class="message-p pn">
              <div class="message-header">
                <h5 style="color: brown;"><i class="fa fa-angle-right"></i> International Links  &nbsp;<button id="infointernational" class="btn btn-default" onclick="infointer();"><i class="fas fa-info"></i></button></h5>
              </div>
              <div class="row">
                <div class="col-md-12"  style="max-height: 180px; overflow-y: auto;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th >Internationa Link</th>
                        <th >BW Limit</th>
                        <th >Upload</th>
                        <th >Download</th>
                        <th >Status</th>
                      </tr>
                    </thead>
                    <tbody>
                        {% for x,y,z,r,a,t in link  %}
                        <tr style="background-color: #f1f1f1;">                
                            <td style="color:rgb(80, 80, 80)">{{ x }}</td>
                            <td style="background-color: #f1f1f1;">{{ t }}</td>
                            <td style="background-color: #f1f1f1;">{{ y }} Mbps</td>
                            <td style="background-color: #f1f1f1;">{{ z }} Mbps</td>
                            {% if y > r or z > r %}
                            <td style="color:red">
                                <i class="fas fa-traffic-light"></i>
                            </td>
                            {% elif y > a or z > a %}
                            <td style="color:darkorange">
                                <i class="fas fa-traffic-light"></i>
                            </td>
                            {% else %}
                            <td style="color:green">
                                <i class="fas fa-traffic-light"></i>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>
    <!--main content end-->
    <!--footer start-->
    <!--footer end-->
  </section>
  <!-- js placed at the end of the document so the pages load faster -->
  <script src="{% static 'lib/jquery/jquery.min.js' %}"></script>
  <script src="https://kit.fontawesome.com/6fa0030673.js"></script>
  <script src="{% static 'lib/bootstrap/js/bootstrap.min.js' %}"></script>
  <script class="include" type="text/javascript" src="{% static 'lib/jquery.dcjqaccordion.2.7.js' %}"></script>
  <script src="{% static 'lib/jquery.scrollTo.min.js' %}"></script>
  <script src="{% static 'lib/jquery.nicescroll.js' %}" type="text/javascript"></script>
  <script src="{% static 'lib/jquery.sparkline.js' %}"></script>
  <!--common script for all pages-->
  <script src="{% static 'lib/common-scripts.js' %}"></script>
  <script type="text/javascript" src="{% static 'lib/gritter/js/jquery.gritter.js' %}"></script>
  <script type="text/javascript" src="{% static 'lib/gritter-conf.js' %}"></script>
  <!--script for this page-->
  <script src="{% static 'lib/sparkline-chart.js' %}"></script>
  <script src="{% static 'lib/zabuto_calendar.js' %}"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      var unique_id = $.gritter.add({
        // (string | mandatory) the heading of the notification
        title: 'Welcome {{ user.get_username }}!',
        // (string | mandatory) the text inside the notification
        text: 'Thank you for coming back.',
        // (string | optional) the image to display on the left
        //image: 'img/ui-sam.jpg',
        // (bool | optional) if you want it to fade out on its own or just sit there
        sticky: false,
        // (int | optional) the time you want it to be alive for before fading out
        time: 5000,
        // (string | optional) the class name you want to apply to that specific message
        class_name: 'my-sticky-class'
      });

      return false;
    });
  </script>
  <script type="application/javascript">
    $(document).ready(function() {
      $("#date-popover").popover({
        html: true,
        trigger: "manual"
      });
      $("#date-popover").hide();
      $("#date-popover").click(function(e) {
        $(this).hide();
      });

      $("#my-calendar").zabuto_calendar({
        action: function() {
          return myDateFunction(this.id, false);
        },
        action_nav: function() {
          return myNavFunction(this.id);
        },
        ajax: {
          url: "show_data.php?action=1",
          modal: true
        },
        legend: [{
            type: "text",
            label: "Special event",
            badge: "00"
          },
          {
            type: "block",
            label: "Regular event",
          }
        ]
      });
    });

    function myNavFunction(id) {
      $("#date-popover").hide();
      var nav = $("#" + id).data("navigation");
      var to = $("#" + id).data("to");
      console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
    }

    function infointer() {
      var unique_id = $.gritter.add({
        // (string | mandatory) the heading of the notification
        title: '<h4>Bandwidth Consumption</h4>',
        // (string | mandatory) the text inside the notification
        text: '<h5><i class="fas fa-traffic-light" style="color:green"></i>  -80% &nbsp;&nbsp;<i class="fas fa-traffic-light" style="color:darkorange"></i>  -90% &nbsp;&nbsp;<i class="fas fa-traffic-light" style="color:red"></i>  +90%</h5>',
        // (string | optional) the image to display on the left
        //image: '{% static 'images/consumo.png' %}',
        // (bool | optional) if you want it to fade out on its own or just sit there
        sticky: false,
        // (int | optional) the time you want it to be alive for before fading out
        time: 5000,
        // (string | optional) the class name you want to apply to that specific message
        class_name: 'my-sticky-class'
      });
    }
  </script>
</body>

</html>

